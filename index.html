<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Sistema de Usuários</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
        <h1 class="destaque">Contatos</h1>
        <p>Insira o contato:</p>
        <div style="width: 90%; height: 40px ">

            <label class="destaque">Insira o nome do contato:</label>
            <input type="nome" id="nome" placeholder="Nome do usuário" class="nome_usuario">
        </div>
    </header>
    <div style="width: 90%; height: 40px ">


        <label class="destaque">Insira o telefone do contato:</label>
        <input type="text" id="telefone" placeholder="Telefone do usuário" class="telefone_usuario">
    </div>
    <main>
        <div class="container">
            <div class="row button-container">
                <button type="button" onclick="salvarDados()" class="destaque">Enviar</button>
                <div class="container">
                    <div class="row button-container">
                    </div>
                </div>
                <ul id="contatos-salvos"></ul>
    </main>
    <div class="calculadora">
        <div class="row button-calculadora">
            <button type="button" onclick="usarCalculadora()" class="btn">Calculadora</button>
            <div class="container">
                <div class="row button-calculadora">
                </div>
            </div>
            <ul id="calculadora"></ul>
        </div>
    </div>
    <script>
        const listaContatos = []
        function exibirContatos() {
            const contatos = document.getElementById('contatos-salvos') // Obtém a lista de contatos salvos
            contatos.innerHTML = '' // Limpa a lista antes de repopular
            listaContatos.forEach((item, index) => {
                // Cria um item de lista para cada contato
                const botaoDeletar = document.createElement('button')
                botaoDeletar.onclick = () => deletarContato(index) // Chama a função de deletar contato (arrow function) e remove somente um item da lista
                botaoDeletar.className = 'btn btn-danger'

                // Configura o botão de deletar
                botaoDeletar.textContent = 'Deletar contato'
                botaoDeletar.style.marginLeft = '10px'

                const itemLista = document.createElement('li')
                itemLista.className = 'lista-item'
                const botaoEditar = document.createElement('button')
                botaoEditar.onclick = () => editarContato(index) // Chama a função de editar contato 
                itemLista.textContent = 'Index: ' + index + '\nNome: ' + item.nome + '\nTelefone: ' + item.telefone
                botaoEditar.className = 'btn btn-warning'

                // Configura o botão de editar
                botaoEditar.textContent = 'Editar contato'
                botaoEditar.style.marginLeft = '10px'

                // Adiciona o botão de deletar ao item de lista
                itemLista.appendChild(botaoDeletar)
                contatos.appendChild(itemLista)

                // Adiciona o botão de editar ao item de lista
                itemLista.appendChild(botaoEditar)
                contatos.appendChild(itemLista)
            })
        }

        function salvarDados() {
            const nomeCampo = document.getElementById('nome')
            const telefoneCampo = document.getElementById('telefone')

            const nomeValue = nomeCampo.value
            const telefoneValue = telefoneCampo.value


            if (nomeValue.length < 3 || telefoneValue.length < 3) return
            const contatos = document.getElementById('contatos-salvos')


            listaContatos.push({
                nome: nomeValue,
                telefone: telefoneValue,
            })

            exibirContatos() // Chama a função para exibir os contatos salvos
            // Limpa os campos de entrada
            nomeCampo.value = ''
            telefoneCampo.value = ''
        }

        function deletarContato(index) {
            listaContatos.splice(index, 1) // Remove o contato da lista
            const contatos = document.getElementById('contatos-salvos') // Obtém a lista de contatos salvos
            exibirContatos() // Chama a função para exibir os contatos salvos
        }

        function editarContato(index) {
            const nomeCampo = document.getElementById('nome')
            const telefoneCampo = document.getElementById('telefone')
            if (nomeCampo.value !== '' || telefoneCampo.value !== '') {
                alert('Salvar antes de fazer a próxima edição!')
                return
            }
            // Exibe o contato selecionado para edição
            const contato = listaContatos[index] // Obtém o contato selecionado para edição
            const contatos = document.getElementById('contatos-salvos') // Obtém a lista de contatos salvos
            contatos.innerHTML = '' // Limpa a lista antes de repopular
            listaContatos.splice(index, 1) // Remove o contato da lista para edição
            const itemLista = document.createElement('li')
            itemLista.className = 'lista-item'
            itemLista.textContent = 'Editando contato: ' + contato.nome + ' - ' + contato.telefone // Exibe o contato que está sendo editado
            // Limpa os campos de entrada
            const botaoEditar = document.createElement('button')
            botaoEditar.className = 'btn btn-warning'
            // Configura o botão de editar
            nomeCampo.value = contato.nome
            telefoneCampo.value = contato.telefone
            botaoEditar.textContent = 'Salvar Edição'
            botaoEditar.style.marginLeft = '10px'
            botaoEditar.onclick = () => salvarDados() // Chama a função de salvar dados para salvar a edição
            // Adiciona o botão de editar ao item de lista
            itemLista.appendChild(botaoEditar)
            contatos.appendChild(itemLista)
            // Limpa os campos de entrada
            nomeCampo.value = contato.nome // Preenche o campo de nome com o valor do contato
            telefoneCampo.value = contato.telefone // Preenche o campo de telefone com o valor do contato
            // Repopula a lista de contatos
            exibirContatos() // Chama a função para exibir os contatos salvos
            nomeCampo.focus() // Foca no campo de nome para facilitar a edição
            telefoneCampo.focus() // Foca no campo de telefone para facilitar a edição
            // Obtém os valores dos campos de entrada
            const nomeValue = nomeCampo.value
            const telefoneValue = telefoneCampo.value
        }

    </script>
</body>

</html>